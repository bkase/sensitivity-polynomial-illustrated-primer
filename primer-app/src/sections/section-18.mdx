# Huang submatrix eigenvalue bounds

This section explains the Lean lemma
`huang_submatrix_max_eigenvalue_ge_sqrt_n`, which proves a lower bound on the
largest eigenvalue of a principal submatrix of the Huang matrix.

## The mathematical claim

Let `n` be a positive integer, and let `S` be a subset of the `2^n` indices with
`|S| > 2^(n-1)`. Consider the principal submatrix `subA` of the Huang matrix
`A = huang_matrix_fin n` obtained by restricting to the rows and columns in `S`.
Then the largest eigenvalue of `subA` is at least `sqrt n`.

In other words, any principal submatrix of size strictly larger than half the
rows must inherit an eigenvalue of size at least `sqrt n`.

## How the lemma is structured in Lean

The lemma has the following shape (simplified):

- `subA` is defined as `principal_submatrix_fin (huang_matrix_fin n) S`.
- `h_subA` is a proof that `subA` is symmetric, so its eigenvalues are real.
- `evs_sub` is the sorted list of eigenvalues of `subA`.
- The lemma concludes that `evs_sub.getLast ... >= Real.sqrt n`.

Lean uses `getLast` with a proof that the list of eigenvalues is nonempty.
That nonemptiness follows from the fact that `S.card > 0`.

## Key ingredients in the proof

### 1) Interlacing of eigenvalues

The proof starts by applying a standard interlacing theorem for principal
submatrices:

- If you take a symmetric matrix `A` and a principal submatrix `subA`, then
  the eigenvalues of `subA` interlace those of `A`.
- In particular, the maximum eigenvalue of `subA` is at least the
  `(m-1)`-th eigenvalue of `A`, where `m = |S|`.

In Lean, this is implemented by `eigenvalue_interlacing_max`, which yields

```
max_eigenvalue(subA) >=
  (sorted_eigenvalues A).get ⟨m - 1, ...⟩
```

The index proof is bookkeeping: it shows `m-1` is within range because
`m <= 2^n` and `m > 0`.

### 2) Explicit spectrum of the Huang matrix

A separate lemma `huang_eigenvalues_eq_list` provides the full eigenvalue list
of the Huang matrix:

```
[-sqrt n, ..., -sqrt n] (2^(n-1) times)
++
[+sqrt n, ..., +sqrt n] (2^(n-1) times)
```

So the sorted eigenvalues are a block of negative values followed by a block of
positive values, with `2^(n-1)` copies of each.

### 3) Positioning the index

Because `m = |S| > 2^(n-1)`, the `(m-1)`-th eigenvalue of the full Huang matrix
falls in the positive block. That entry is exactly `+sqrt n`.

Lean encodes this by rewriting with the explicit eigenvalue list and using a
case split in `List.getElem_append` to show the index lands in the right half.

### 4) Final inequality

Combining interlacing with the explicit spectrum, the proof concludes

```
max_eigenvalue(subA) >= sqrt n.
```

This is exactly the statement in the lemma.

## Summary

The lemma is a standard application of eigenvalue interlacing and the explicit
spectrum of the Huang matrix. The key point is that any principal submatrix with
more than half the rows must inherit a large positive eigenvalue, because the
full matrix has `2^(n-1)` copies of `+sqrt n` and interlacing forces the submatrix
maximum to be at least one of them.
